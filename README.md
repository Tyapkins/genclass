# Классификатор набора параметров
## Состав репозитория

Репозиторий включает в себя 5 основных каталогов:

* `step_ini` - этап генерации конфигурационных файлов;
* `step_genout` - этап генерации запросов;
* `step_caches` - этап запуска симуляторов кэшей;
* `step_final` - финальный, сравнительный этап;
* `sfuncs` - функции, необходимые для сравнения наборов атрибутов;
* `scache` - каталог с модифицированными генератором и симуляторами кэшей.

В корневом каталоге репозитория также находится таблица атрибутов `table.json`, полученная парсингом реальных данных. К сожалению, ввиду системного ограничения, в репозитории представлена неполная таблица.

Кроме того, там же расположен парсер реальных данных `parse.py`. С его помощью была получена вышеуказанная таблица.

В качестве подмодуля используется репозиторий `scache`, который размещён в каталоге `scache_copy`.

### Состав каталога `step_ini`

Каталог содержит генератор конфигурационных файлов `ini_gen.py` и подкаталог `gen_ini`.

Программа `ini_gen.py` принимает 4 необязательных аргумента командной строки (указываются в том же порядке, что ниже): 

* количество генерируемых _конфигурационных файлов_ (по умолчанию 10);
* количество _атрибутов_ в каждом мотиве (по умолчанию 1);
* количество _секций_ в конфигурационном файле (по умолчанию 4);
* _seed_ для повторения экспериментов (если не введён - генерируется случайным образом и выводится на экран).

Все сгенерированные конфигурационные файлы помещаются в каталог `gen_ini`, а их название имеет вид "_test`i`.ini_", где `i` - порядковый номер сгенерированного ini-файла.

### Состав каталога `step_genout`

Здесь находятся скрипт `generation.sh` и подкаталог `gen_out`. 

Скрипт `generation.sh` осуществляет запуск генератора запросов, а сами сгенерированные запросы помещаются в каталог `gen_out`.

На вход ему подаётся один _обязательный_ аргумент командной строки - количество генерируемых запросов.

Сам скрипт использует конфигурационные файлы с названием вида "_test`i`.ini_", а генерируемые запросы помещает в подкаталог `gen_out`.
Название генерируемых запросов имеет вид  _"out_test`i`.txt"_, где `i` - порядковый номер сгенерированного запроса.

***Важно!*** Для корректной работы модифицированный генератор должен быть расположен в подкаталоге `scache` корневого каталога репозитория.

### Состав каталога `step_caches`

В директории имеются два скрипта `to_lru.sh` и `to_scache.sh` и три подкаталога `lru_out`, `scache_out` и `log`. 

Каждый из двух скриптов подаёт поток запросам соответствующему кэшу и помещает результат работы в соответствующий подкаталог.

Оба скрипта принимают на вход один _обязательный_ параметр - количество подаваемых на вход кэшам запросов.

Каталог `log` содержит файлы с логом работы кэшей.

***Важно!*** Оба симулятора кэшей должны находиться в подкаталоге `scache` корневого каталога репозитория. 

### Состав каталога `step_final`

Содержит 3 файла: скрипт `puttgthr.sh`, программу `compare.py` и итоговую таблицу `final_table.txt`.

Скрипт `puttgthr.sh` автоматизирует сравнение работы двух кэшей, запуская все предыдущие скрипты.
На вход ему подаётся один _обязательный_ аргумент командной строки - количество проводимых экспериментов.

Программа `compare.py` осуществляет непосредственное сравнение работы симуляторов кэшей. 


Таблица `final_table.txt` содержит итоговую информацию о результате работы кэшей.

В данной таблице имеется четыре столбца:

* список всех мотивов для данного эксперимента;
* показатель качества BHR для LRU;
* показатель качества BHR для scache;
* сравнение BHR (1, если для scache BHR выше, чем LRU, и 0  в противном случае).

